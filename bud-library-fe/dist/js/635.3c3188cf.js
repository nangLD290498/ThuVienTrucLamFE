"use strict";(self["webpackChunkbuddhist_library_fe"]=self["webpackChunkbuddhist_library_fe"]||[]).push([[635],{4501:function(e,t,a){a.d(t,{Z:function(){return _}});var s=a(3396),l=a(7139),n=a(9242),i=(e,t)=>{const a=e.__vccOpts||e;for(const[s,l]of t)a[s]=l;return a};const d={data(){return{innerValue:1}},props:{modelValue:{type:Number},pageCount:{type:Number,required:!0},initialPage:{type:Number,default:1},forcePage:{type:Number},clickHandler:{type:Function,default:()=>{}},pageRange:{type:Number,default:3},marginPages:{type:Number,default:1},prevText:{type:String,default:"Prev"},nextText:{type:String,default:"Next"},breakViewText:{type:String,default:"…"},containerClass:{type:String,default:"pagination"},pageClass:{type:String,default:"page-item"},pageLinkClass:{type:String,default:"page-link"},prevClass:{type:String,default:"page-item"},prevLinkClass:{type:String,default:"page-link"},nextClass:{type:String,default:"page-item"},nextLinkClass:{type:String,default:"page-link"},breakViewClass:{type:String},breakViewLinkClass:{type:String},activeClass:{type:String,default:"active"},disabledClass:{type:String,default:"disabled"},noLiSurround:{type:Boolean,default:!1},firstLastButton:{type:Boolean,default:!1},firstButtonText:{type:String,default:"First"},lastButtonText:{type:String,default:"Last"},hidePrevNext:{type:Boolean,default:!1}},computed:{selected:{get:function(){return this.modelValue||this.innerValue},set:function(e){this.innerValue=e}},pages:function(){let e={};if(this.pageCount<=this.pageRange)for(let t=0;t<this.pageCount;t++){let a={index:t,content:t+1,selected:t===this.selected-1};e[t]=a}else{const t=Math.floor(this.pageRange/2);let a=t=>{let a={index:t,content:t+1,selected:t===this.selected-1};e[t]=a},s=t=>{let a={disabled:!0,breakView:!0};e[t]=a};for(let e=0;e<this.marginPages;e++)a(e);let l=0;this.selected-t>0&&(l=this.selected-1-t);let n=l+this.pageRange-1;n>=this.pageCount&&(n=this.pageCount-1,l=n-this.pageRange+1);for(let e=l;e<=n&&e<=this.pageCount-1;e++)a(e);l>this.marginPages&&s(l-1),n+1<this.pageCount-this.marginPages&&s(n+1);for(let e=this.pageCount-1;e>=this.pageCount-this.marginPages;e--)a(e)}return e}},methods:{handlePageSelected(e){this.selected!==e&&(this.innerValue=e,this.$emit("update:modelValue",e),this.clickHandler(e))},prevPage(){this.selected<=1||this.handlePageSelected(this.selected-1)},nextPage(){this.selected>=this.pageCount||this.handlePageSelected(this.selected+1)},firstPageSelected(){return 1===this.selected},lastPageSelected(){return this.selected===this.pageCount||0===this.pageCount},selectFirstPage(){this.selected<=1||this.handlePageSelected(1)},selectLastPage(){this.selected>=this.pageCount||this.handlePageSelected(this.pageCount)}},beforeMount(){this.innerValue=this.initialPage},beforeUpdate(){void 0!==this.forcePage&&this.forcePage!==this.selected&&(this.selected=this.forcePage)}},c=["tabindex","innerHTML"],r=["tabindex","innerHTML"],o=["onClick","onKeyup"],g=["tabindex","innerHTML"],u=["tabindex","innerHTML"],p=["innerHTML"],h=["innerHTML"],k=["onClick","onKeyup"],C=["innerHTML"],b=["innerHTML"];function f(e,t,a,i,d,f){return a.noLiSurround?((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,l.C_)(a.containerClass)},[a.firstLastButton?((0,s.wg)(),(0,s.iD)("a",{key:0,onClick:t[8]||(t[8]=e=>f.selectFirstPage()),onKeyup:t[9]||(t[9]=(0,n.D2)((e=>f.selectFirstPage()),["enter"])),class:(0,l.C_)([a.pageLinkClass,f.firstPageSelected()?a.disabledClass:""]),tabindex:"0",innerHTML:a.firstButtonText},null,42,p)):(0,s.kq)("",!0),f.firstPageSelected()&&a.hidePrevNext?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",{key:1,onClick:t[10]||(t[10]=e=>f.prevPage()),onKeyup:t[11]||(t[11]=(0,n.D2)((e=>f.prevPage()),["enter"])),class:(0,l.C_)([a.prevLinkClass,f.firstPageSelected()?a.disabledClass:""]),tabindex:"0",innerHTML:a.prevText},null,42,h)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.pages,(t=>((0,s.wg)(),(0,s.iD)(s.HY,null,[t.breakView?((0,s.wg)(),(0,s.iD)("a",{key:t.index,class:(0,l.C_)([a.pageLinkClass,a.breakViewLinkClass,t.disabled?a.disabledClass:""]),tabindex:"0"},[(0,s.WI)(e.$slots,"breakViewContent",{},(()=>[(0,s.Uk)((0,l.zw)(a.breakViewText),1)]))],2)):t.disabled?((0,s.wg)(),(0,s.iD)("a",{key:t.index,class:(0,l.C_)([a.pageLinkClass,t.selected?a.activeClass:"",a.disabledClass]),tabindex:"0"},(0,l.zw)(t.content),3)):((0,s.wg)(),(0,s.iD)("a",{key:t.index,onClick:e=>f.handlePageSelected(t.index+1),onKeyup:(0,n.D2)((e=>f.handlePageSelected(t.index+1)),["enter"]),class:(0,l.C_)([a.pageLinkClass,t.selected?a.activeClass:""]),tabindex:"0"},(0,l.zw)(t.content),43,k))],64)))),256)),f.lastPageSelected()&&a.hidePrevNext?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",{key:2,onClick:t[12]||(t[12]=e=>f.nextPage()),onKeyup:t[13]||(t[13]=(0,n.D2)((e=>f.nextPage()),["enter"])),class:(0,l.C_)([a.nextLinkClass,f.lastPageSelected()?a.disabledClass:""]),tabindex:"0",innerHTML:a.nextText},null,42,C)),a.firstLastButton?((0,s.wg)(),(0,s.iD)("a",{key:3,onClick:t[14]||(t[14]=e=>f.selectLastPage()),onKeyup:t[15]||(t[15]=(0,n.D2)((e=>f.selectLastPage()),["enter"])),class:(0,l.C_)([a.pageLinkClass,f.lastPageSelected()?a.disabledClass:""]),tabindex:"0",innerHTML:a.lastButtonText},null,42,b)):(0,s.kq)("",!0)],2)):((0,s.wg)(),(0,s.iD)("ul",{key:0,class:(0,l.C_)(a.containerClass)},[a.firstLastButton?((0,s.wg)(),(0,s.iD)("li",{key:0,class:(0,l.C_)([a.pageClass,f.firstPageSelected()?a.disabledClass:""])},[(0,s._)("a",{onClick:t[0]||(t[0]=e=>f.selectFirstPage()),onKeyup:t[1]||(t[1]=(0,n.D2)((e=>f.selectFirstPage()),["enter"])),class:(0,l.C_)(a.pageLinkClass),tabindex:f.firstPageSelected()?-1:0,innerHTML:a.firstButtonText},null,42,c)],2)):(0,s.kq)("",!0),f.firstPageSelected()&&a.hidePrevNext?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",{key:1,class:(0,l.C_)([a.prevClass,f.firstPageSelected()?a.disabledClass:""])},[(0,s._)("a",{onClick:t[2]||(t[2]=e=>f.prevPage()),onKeyup:t[3]||(t[3]=(0,n.D2)((e=>f.prevPage()),["enter"])),class:(0,l.C_)(a.prevLinkClass),tabindex:f.firstPageSelected()?-1:0,innerHTML:a.prevText},null,42,r)],2)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.pages,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.index,class:(0,l.C_)([a.pageClass,t.selected?a.activeClass:"",t.disabled?a.disabledClass:"",t.breakView?a.breakViewClass:""])},[t.breakView?((0,s.wg)(),(0,s.iD)("a",{key:0,class:(0,l.C_)([a.pageLinkClass,a.breakViewLinkClass]),tabindex:"0"},[(0,s.WI)(e.$slots,"breakViewContent",{},(()=>[(0,s.Uk)((0,l.zw)(a.breakViewText),1)]))],2)):t.disabled?((0,s.wg)(),(0,s.iD)("a",{key:1,class:(0,l.C_)(a.pageLinkClass),tabindex:"0"},(0,l.zw)(t.content),3)):((0,s.wg)(),(0,s.iD)("a",{key:2,onClick:e=>f.handlePageSelected(t.index+1),onKeyup:(0,n.D2)((e=>f.handlePageSelected(t.index+1)),["enter"]),class:(0,l.C_)(a.pageLinkClass),tabindex:"0"},(0,l.zw)(t.content),43,o))],2)))),128)),f.lastPageSelected()&&a.hidePrevNext?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",{key:2,class:(0,l.C_)([a.nextClass,f.lastPageSelected()?a.disabledClass:""])},[(0,s._)("a",{onClick:t[4]||(t[4]=e=>f.nextPage()),onKeyup:t[5]||(t[5]=(0,n.D2)((e=>f.nextPage()),["enter"])),class:(0,l.C_)(a.nextLinkClass),tabindex:f.lastPageSelected()?-1:0,innerHTML:a.nextText},null,42,g)],2)),a.firstLastButton?((0,s.wg)(),(0,s.iD)("li",{key:3,class:(0,l.C_)([a.pageClass,f.lastPageSelected()?a.disabledClass:""])},[(0,s._)("a",{onClick:t[6]||(t[6]=e=>f.selectLastPage()),onKeyup:t[7]||(t[7]=(0,n.D2)((e=>f.selectLastPage()),["enter"])),class:(0,l.C_)(a.pageLinkClass),tabindex:f.lastPageSelected()?-1:0,innerHTML:a.lastButtonText},null,42,u)],2)):(0,s.kq)("",!0)],2))}var _=i(d,[["render",f]])},8635:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var s=a(3396),l=a(7139);const n=e=>((0,s.dD)("data-v-7637ce82"),e=e(),(0,s.Cn)(),e),i={class:"section"},d={class:"section-header d-block"},c=n((()=>(0,s._)("div",{class:"section-title mt-0"},"Quản lý sách",-1))),r={class:"add-book"},o={class:"row"},g={class:"col-md-12"},u={class:"float-right"},p={class:"section-body"},h={class:"row"},k={class:"col-12"},C={class:"card"},b={class:"card-body"},f={class:"table-hover table"},_=n((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"#"),(0,s._)("th",{scope:"col"},"Tên sách"),(0,s._)("th",{scope:"col"},"Chi tiết"),(0,s._)("th",{scope:"col"})])],-1))),x={class:"badge badge-info"},y={class:"badge badge-info"},P={class:"badge badge-info mx-1"},w={class:"btn-group",role:"group"},m=n((()=>(0,s._)("i",{class:"fas fa-edit",title:"Chỉnh xửa sách",style:{"font-size":"15px",color:"black",cursor:"pointer"}},null,-1))),v=["onClick"],S={class:"text-center"};function L(e,t,a,n,L,D){const T=(0,s.up)("router-link"),V=(0,s.up)("paginate");return(0,s.wg)(),(0,s.iD)("section",i,[(0,s._)("div",d,[c,(0,s._)("div",r,[(0,s._)("div",o,[(0,s._)("div",g,[(0,s._)("div",u,[(0,s.Wm)(T,{to:"/admin/books/add",class:"btn btn-success"},{default:(0,s.w5)((()=>[(0,s.Uk)("Thêm sách")])),_:1})])])])])]),(0,s._)("div",p,[(0,s._)("div",h,[(0,s._)("div",k,[(0,s._)("div",C,[(0,s._)("div",b,[(0,s._)("i",null,[(0,s._)("b",null,[(0,s._)("span",null,(0,l.zw)(e.total),1)]),(0,s.Uk)(" books")]),(0,s._)("table",f,[_,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.books,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,(0,l.zw)(t+1+(L.page-1)*L.pageSize),1),(0,s._)("td",null,[(0,s._)("b",null,(0,l.zw)(e.name)+" - "+(0,l.zw)(e.author),1)]),(0,s._)("td",null,[(0,s._)("span",x,(0,l.zw)(e.publisher),1),(0,s._)("span",y,(0,l.zw)(e.publishedYear),1),(0,s._)("span",P,(0,l.zw)(e.category.name),1)]),(0,s._)("td",null,[(0,s._)("div",w,[(0,s.Wm)(T,{to:{name:"admin.books-update",params:{id:e.id,cate:e.category.name}}},{default:(0,s.w5)((()=>[m])),_:2},1032,["to"]),(0,s.Uk)("       "),(0,s._)("i",{class:"fas fa-trash-alt",onClick:t=>D._delete(e),title:"Xóa sách",style:{"font-size":"15px",color:"red",cursor:"pointer"}},null,8,v)])])])))),128))])]),(0,s._)("nav",S,[(0,s.Wm)(V,{modelValue:L.page,"onUpdate:modelValue":t[0]||(t[0]=e=>L.page=e),"page-count":e.pageCount,"page-range":3,"margin-pages":2,"click-handler":D.clickCallback,"container-class":"pagination","page-class":"page-item","next-link-class":"page-link","prev-link-class":"page-link"},null,8,["modelValue","page-count","click-handler"])])])])])])])])}var D=a(5580),T=a(65),V=a(4501),H={data(){return{page:D.ZP.DEFAULT_PAGE,pageSize:D.ZP.PAGE_SIZE,filterParams:{}}},computed:{...(0,T.rn)("Book",["books","pageCount","total"])},components:{paginate:V.Z},created(){this.getData()},methods:{getData(){let e=this;this.$store.dispatch("Book/get",{page:this.page}).then((()=>{})).catch((function(t){e.$notify({type:"error",text:"Execute failed!"})}))},clickCallback(){this.getData()},_delete(e){if(confirm("Bạn thực sự muốn xóa sách này !")){let t=localStorage.getItem("user");console.log("delete ",e),this.$store.dispatch("Book/delete",{id:e.id,token:t}).then((()=>{this.$notify({type:"success",text:"Xóa thành công !"}),this.getData()}),(e=>{401===e.request.status&&(alert("Bạn đã hết phiên đăng nhập, hãy đăng nhập lại để tiếp tục !"),console.log("loggin out"),localStorage.removeItem("user"),localStorage.removeItem("username"),this.$router.go("/login"))}))}}}},B=a(89);const M=(0,B.Z)(H,[["render",L],["__scopeId","data-v-7637ce82"]]);var z=M}}]);
//# sourceMappingURL=635.3c3188cf.js.map