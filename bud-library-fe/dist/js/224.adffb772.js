"use strict";(self["webpackChunkbuddhist_library_fe"]=self["webpackChunkbuddhist_library_fe"]||[]).push([[224],{4501:function(e,t,a){a.d(t,{Z:function(){return C}});var s=a(3396),n=a(7139),l=a(9242),i=(e,t)=>{const a=e.__vccOpts||e;for(const[s,n]of t)a[s]=n;return a};const o={data(){return{innerValue:1}},props:{modelValue:{type:Number},pageCount:{type:Number,required:!0},initialPage:{type:Number,default:1},forcePage:{type:Number},clickHandler:{type:Function,default:()=>{}},pageRange:{type:Number,default:3},marginPages:{type:Number,default:1},prevText:{type:String,default:"Prev"},nextText:{type:String,default:"Next"},breakViewText:{type:String,default:"…"},containerClass:{type:String,default:"pagination"},pageClass:{type:String,default:"page-item"},pageLinkClass:{type:String,default:"page-link"},prevClass:{type:String,default:"page-item"},prevLinkClass:{type:String,default:"page-link"},nextClass:{type:String,default:"page-item"},nextLinkClass:{type:String,default:"page-link"},breakViewClass:{type:String},breakViewLinkClass:{type:String},activeClass:{type:String,default:"active"},disabledClass:{type:String,default:"disabled"},noLiSurround:{type:Boolean,default:!1},firstLastButton:{type:Boolean,default:!1},firstButtonText:{type:String,default:"First"},lastButtonText:{type:String,default:"Last"},hidePrevNext:{type:Boolean,default:!1}},computed:{selected:{get:function(){return this.modelValue||this.innerValue},set:function(e){this.innerValue=e}},pages:function(){let e={};if(this.pageCount<=this.pageRange)for(let t=0;t<this.pageCount;t++){let a={index:t,content:t+1,selected:t===this.selected-1};e[t]=a}else{const t=Math.floor(this.pageRange/2);let a=t=>{let a={index:t,content:t+1,selected:t===this.selected-1};e[t]=a},s=t=>{let a={disabled:!0,breakView:!0};e[t]=a};for(let e=0;e<this.marginPages;e++)a(e);let n=0;this.selected-t>0&&(n=this.selected-1-t);let l=n+this.pageRange-1;l>=this.pageCount&&(l=this.pageCount-1,n=l-this.pageRange+1);for(let e=n;e<=l&&e<=this.pageCount-1;e++)a(e);n>this.marginPages&&s(n-1),l+1<this.pageCount-this.marginPages&&s(l+1);for(let e=this.pageCount-1;e>=this.pageCount-this.marginPages;e--)a(e)}return e}},methods:{handlePageSelected(e){this.selected!==e&&(this.innerValue=e,this.$emit("update:modelValue",e),this.clickHandler(e))},prevPage(){this.selected<=1||this.handlePageSelected(this.selected-1)},nextPage(){this.selected>=this.pageCount||this.handlePageSelected(this.selected+1)},firstPageSelected(){return 1===this.selected},lastPageSelected(){return this.selected===this.pageCount||0===this.pageCount},selectFirstPage(){this.selected<=1||this.handlePageSelected(1)},selectLastPage(){this.selected>=this.pageCount||this.handlePageSelected(this.pageCount)}},beforeMount(){this.innerValue=this.initialPage},beforeUpdate(){void 0!==this.forcePage&&this.forcePage!==this.selected&&(this.selected=this.forcePage)}},r=["tabindex","innerHTML"],d=["tabindex","innerHTML"],c=["onClick","onKeyup"],g=["tabindex","innerHTML"],u=["tabindex","innerHTML"],h=["innerHTML"],p=["innerHTML"],b=["onClick","onKeyup"],m=["innerHTML"],k=["innerHTML"];function f(e,t,a,i,o,f){return a.noLiSurround?((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,n.C_)(a.containerClass)},[a.firstLastButton?((0,s.wg)(),(0,s.iD)("a",{key:0,onClick:t[8]||(t[8]=e=>f.selectFirstPage()),onKeyup:t[9]||(t[9]=(0,l.D2)((e=>f.selectFirstPage()),["enter"])),class:(0,n.C_)([a.pageLinkClass,f.firstPageSelected()?a.disabledClass:""]),tabindex:"0",innerHTML:a.firstButtonText},null,42,h)):(0,s.kq)("",!0),f.firstPageSelected()&&a.hidePrevNext?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",{key:1,onClick:t[10]||(t[10]=e=>f.prevPage()),onKeyup:t[11]||(t[11]=(0,l.D2)((e=>f.prevPage()),["enter"])),class:(0,n.C_)([a.prevLinkClass,f.firstPageSelected()?a.disabledClass:""]),tabindex:"0",innerHTML:a.prevText},null,42,p)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.pages,(t=>((0,s.wg)(),(0,s.iD)(s.HY,null,[t.breakView?((0,s.wg)(),(0,s.iD)("a",{key:t.index,class:(0,n.C_)([a.pageLinkClass,a.breakViewLinkClass,t.disabled?a.disabledClass:""]),tabindex:"0"},[(0,s.WI)(e.$slots,"breakViewContent",{},(()=>[(0,s.Uk)((0,n.zw)(a.breakViewText),1)]))],2)):t.disabled?((0,s.wg)(),(0,s.iD)("a",{key:t.index,class:(0,n.C_)([a.pageLinkClass,t.selected?a.activeClass:"",a.disabledClass]),tabindex:"0"},(0,n.zw)(t.content),3)):((0,s.wg)(),(0,s.iD)("a",{key:t.index,onClick:e=>f.handlePageSelected(t.index+1),onKeyup:(0,l.D2)((e=>f.handlePageSelected(t.index+1)),["enter"]),class:(0,n.C_)([a.pageLinkClass,t.selected?a.activeClass:""]),tabindex:"0"},(0,n.zw)(t.content),43,b))],64)))),256)),f.lastPageSelected()&&a.hidePrevNext?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",{key:2,onClick:t[12]||(t[12]=e=>f.nextPage()),onKeyup:t[13]||(t[13]=(0,l.D2)((e=>f.nextPage()),["enter"])),class:(0,n.C_)([a.nextLinkClass,f.lastPageSelected()?a.disabledClass:""]),tabindex:"0",innerHTML:a.nextText},null,42,m)),a.firstLastButton?((0,s.wg)(),(0,s.iD)("a",{key:3,onClick:t[14]||(t[14]=e=>f.selectLastPage()),onKeyup:t[15]||(t[15]=(0,l.D2)((e=>f.selectLastPage()),["enter"])),class:(0,n.C_)([a.pageLinkClass,f.lastPageSelected()?a.disabledClass:""]),tabindex:"0",innerHTML:a.lastButtonText},null,42,k)):(0,s.kq)("",!0)],2)):((0,s.wg)(),(0,s.iD)("ul",{key:0,class:(0,n.C_)(a.containerClass)},[a.firstLastButton?((0,s.wg)(),(0,s.iD)("li",{key:0,class:(0,n.C_)([a.pageClass,f.firstPageSelected()?a.disabledClass:""])},[(0,s._)("a",{onClick:t[0]||(t[0]=e=>f.selectFirstPage()),onKeyup:t[1]||(t[1]=(0,l.D2)((e=>f.selectFirstPage()),["enter"])),class:(0,n.C_)(a.pageLinkClass),tabindex:f.firstPageSelected()?-1:0,innerHTML:a.firstButtonText},null,42,r)],2)):(0,s.kq)("",!0),f.firstPageSelected()&&a.hidePrevNext?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",{key:1,class:(0,n.C_)([a.prevClass,f.firstPageSelected()?a.disabledClass:""])},[(0,s._)("a",{onClick:t[2]||(t[2]=e=>f.prevPage()),onKeyup:t[3]||(t[3]=(0,l.D2)((e=>f.prevPage()),["enter"])),class:(0,n.C_)(a.prevLinkClass),tabindex:f.firstPageSelected()?-1:0,innerHTML:a.prevText},null,42,d)],2)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.pages,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.index,class:(0,n.C_)([a.pageClass,t.selected?a.activeClass:"",t.disabled?a.disabledClass:"",t.breakView?a.breakViewClass:""])},[t.breakView?((0,s.wg)(),(0,s.iD)("a",{key:0,class:(0,n.C_)([a.pageLinkClass,a.breakViewLinkClass]),tabindex:"0"},[(0,s.WI)(e.$slots,"breakViewContent",{},(()=>[(0,s.Uk)((0,n.zw)(a.breakViewText),1)]))],2)):t.disabled?((0,s.wg)(),(0,s.iD)("a",{key:1,class:(0,n.C_)(a.pageLinkClass),tabindex:"0"},(0,n.zw)(t.content),3)):((0,s.wg)(),(0,s.iD)("a",{key:2,onClick:e=>f.handlePageSelected(t.index+1),onKeyup:(0,l.D2)((e=>f.handlePageSelected(t.index+1)),["enter"]),class:(0,n.C_)(a.pageLinkClass),tabindex:"0"},(0,n.zw)(t.content),43,c))],2)))),128)),f.lastPageSelected()&&a.hidePrevNext?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",{key:2,class:(0,n.C_)([a.nextClass,f.lastPageSelected()?a.disabledClass:""])},[(0,s._)("a",{onClick:t[4]||(t[4]=e=>f.nextPage()),onKeyup:t[5]||(t[5]=(0,l.D2)((e=>f.nextPage()),["enter"])),class:(0,n.C_)(a.nextLinkClass),tabindex:f.lastPageSelected()?-1:0,innerHTML:a.nextText},null,42,g)],2)),a.firstLastButton?((0,s.wg)(),(0,s.iD)("li",{key:3,class:(0,n.C_)([a.pageClass,f.lastPageSelected()?a.disabledClass:""])},[(0,s._)("a",{onClick:t[6]||(t[6]=e=>f.selectLastPage()),onKeyup:t[7]||(t[7]=(0,l.D2)((e=>f.selectLastPage()),["enter"])),class:(0,n.C_)(a.pageLinkClass),tabindex:f.lastPageSelected()?-1:0,innerHTML:a.lastButtonText},null,42,u)],2)):(0,s.kq)("",!0)],2))}var C=i(o,[["render",f]])},5325:function(e,t,a){a.d(t,{Z:function(){return g}});var s=a(3396),n=a(7139);const l=(0,s.uE)('<span class="rot-1" data-v-571b8f05></span><span class="rot-2" data-v-571b8f05></span><span class="rot-3" data-v-571b8f05></span><span class="rot-4" data-v-571b8f05></span><span class="rot-5" data-v-571b8f05></span><span class="rot-6" data-v-571b8f05></span><span class="rot-7" data-v-571b8f05></span><span class="rot-8" data-v-571b8f05></span>',8),i=[l];function o(e,t,a,l,o,r){return(0,s.wg)(),(0,s.iD)("div",{class:"preloader",style:(0,n.j5)(r.cssVars)},i,4)}var r={name:"Preloader",props:{color:{type:String,default:"#41b883"},scale:{type:Number,default:1}},computed:{cssVars(){return{"--color":this.color,"--scale":this.scale}}}},d=a(89);const c=(0,d.Z)(r,[["render",o],["__scopeId","data-v-571b8f05"]]);var g=c},9224:function(e,t,a){a.r(t),a.d(t,{default:function(){return $e}});var s=a(3396),n=a(7139),l=a(9242);const i=e=>((0,s.dD)("data-v-baabd6c0"),e=e(),(0,s.Cn)(),e),o={class:"row search-bar"},r=i((()=>(0,s._)("i",{class:"fas fa-book-open mr-2"},null,-1))),d=i((()=>(0,s._)("option",{value:"*"},"Tất cả",-1))),c=["value"],g=["disabled"],u=i((()=>(0,s._)("i",{class:"fas fa-search fa-fw"},null,-1))),h=[u],p={class:"search-body",style:{margin:"40px 100px"}},b=i((()=>(0,s._)("div",null,[(0,s._)("section",{class:"section"},[(0,s._)("div",{class:"section-header d-block p-3"},[(0,s._)("div",{class:"section-title m-0 main-color"},"Kết quả tìm kiếm")])])],-1))),m={key:0},k=i((()=>(0,s._)("br",null,null,-1))),f={key:2,class:"table"},C=i((()=>(0,s._)("tr",null,[(0,s._)("th",null,"#"),(0,s._)("th",{style:{"min-width":"111px"}},"Thư mục"),(0,s._)("th",null,"Sách"),(0,s._)("th",{style:{"min-width":"100px"}},"Tác giả"),(0,s._)("th",{style:{"min-width":"111px"}},"Mục lục"),(0,s._)("th",null,"Trang"),(0,s._)("th",null,"Nội dung"),(0,s._)("th",{style:{"min-width":"100px"}},"Chi tiết")],-1))),_=["innerHTML"],y=["onClick"],w={key:3,class:"text-center"},x={class:"modal-md modal-dialog-centered",role:"document"},v={class:"modal-content bg-copy-x"},S=i((()=>(0,s._)("div",{class:"modal-header mh pt-3",style:{"border-bottom":"solid 1px #dbdbdb"}},[(0,s._)("h5",{class:"modal-title"},"Chi tiết")],-1))),P={ref:"searchContent",class:"modal-body mb",style:{"border-bottom":"solid 1px #dbdbdb"}},L={class:"speech-bubble"},D={class:"share-inside"},T=i((()=>(0,s._)("b",null,"Chi tiết",-1))),z=[T],V={class:"col-12"},I={class:"sutra__header"},M=i((()=>(0,s._)("div",{class:"sutra-head__book-cover"},[(0,s._)("img",{class:"img-fluid",src:"https://api.phapbao.org/uploads/tu-tuong-phat-giao-an-do.JPG"})],-1))),H={class:"sutra-head-detail"},q={class:"sutra-name"},B={class:"sutra-author ng-star-inserted"},E={href:"javascript:void(0);"},K=i((()=>(0,s._)("hr",{class:"my-2"},null,-1))),N={class:"pagedetail-form form-inline ng-untouched ng-pristine ng-valid"},U={class:"pagedetail-form__flex-group group-1"},R=i((()=>(0,s._)("i",{class:"fas fa-binoculars mr-1"},null,-1))),Y=i((()=>(0,s._)("i",{class:"fas fa-binoculars mr-1"},null,-1))),Z={class:"zoom"},F=i((()=>(0,s._)("hr",{class:"d-none d-lg-block d-xl-block my-2"},null,-1))),A=i((()=>(0,s._)("small",{class:"d-none d-lg-block d-xl-block mt-2 font-italic"}," Chọn nội dung và click phải sử dụng tính năng Trích Dẫn ",-1))),X=i((()=>(0,s._)("hr",{class:"my-2"},null,-1))),j={class:"page-content"},O={class:"modal-footer mf",style:{padding:"10px 10px 10px 0px"}},W=i((()=>(0,s._)("button",{class:"d-none btn btn-primary btn-info mx-2 trigger--fire-modal-confirm","data-toggle":"modal","data-target":"#fire-modal-confirm",id:"fire-modal"},"Delete all",-1))),G={key:1,ref:"reference",class:"custome-modal-2",tabindex:"-1",id:"fire-modal-confirm","aria-modal":"true",role:"dialog"},J={class:"modal-dialog modal-md modal-dialog-centered",role:"document"},Q={class:"modal-content bg-copy-x"},ee=i((()=>(0,s._)("div",{class:"modal-header pt-3",style:{"border-bottom":"solid 1px #dbdbdb"}},[(0,s._)("h5",{class:"modal-title"},"Trích dẫn")],-1))),te={class:"modal-body",style:{"border-bottom":"solid 1px #dbdbdb"}},ae={class:"main-color"},se=i((()=>(0,s._)("hr",null,null,-1))),ne={class:"row"},le=i((()=>(0,s._)("div",{class:"col-4 font-weight-bold"},"Tác giả/Dịch giả",-1))),ie={class:"col-8 main-color"},oe={class:"row"},re=i((()=>(0,s._)("div",{class:"col-4 font-weight-bold"},"Tên sách",-1))),de={class:"col-8 main-color"},ce={class:"row"},ge=i((()=>(0,s._)("div",{class:"col-4 font-weight-bold"},"Mục lục",-1))),ue={class:"col-8"},he={class:"main-color"},pe=i((()=>(0,s._)("br",null,null,-1))),be={class:"row"},me=i((()=>(0,s._)("div",{class:"col-4 font-weight-bold"},"Nhà xuất bản",-1))),ke={class:"col-8 main-color"},fe={class:"row"},Ce=i((()=>(0,s._)("div",{class:"col-4 font-weight-bold"},"Năm xuất bản",-1))),_e={class:"col-8 main-color"},ye={class:"row"},we=i((()=>(0,s._)("div",{class:"col-4 font-weight-bold"},"Trang",-1))),xe={class:"col-8 main-color"},ve={class:"main-color"},Se={class:"modal-footer",style:{padding:"10px 10px 10px 0px"}};function Pe(e,t,a,i,u,T){const $=(0,s.up)("Loader"),Pe=(0,s.up)("paginate"),Le=(0,s.up)("vue-pdf-embed"),De=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",o,[r,(0,s.wy)((0,s._)("select",{name:"categories",id:"cate","onUpdate:modelValue":t[0]||(t[0]=e=>u.category=e)},[d,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.categories,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.name,value:e.name},(0,n.zw)(e.name),9,c)))),128))],512),[[l.bM,u.category]]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.searchText=e),class:"ng-tns-c84-8 ui-inputtext ui-widget ui-state-default ui-corner-all ui-autocomplete-input ng-star-inserted",type:"text",placeholder:"Tìm kiếm theo nội dung sách",size:"50"},null,512),[[l.nr,u.searchText]]),(0,s._)("button",{class:"btn-search",disabled:u.isLoading,onClick:t[2]||(t[2]=e=>T.reloadSearchResult(u.category,1))},h,8,g)]),(0,s._)("div",p,[b,u.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("h6",m,(0,n.zw)(u.totalElementsV2)+" kết quả",1)),k,u.isLoading?((0,s.wg)(),(0,s.j4)($,{key:1,class:"loader"})):(0,s.kq)("",!0),u.totalElementsV2>0&&!u.isLoading?((0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("table",null,[C,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.searchItemsV2,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:e},[(0,s._)("td",null,(0,n.zw)(t+1+(u.page-1)*u.pageSize),1),(0,s._)("td",null,(0,n.zw)(e.category),1),(0,s._)("td",null,(0,n.zw)(e.book_name),1),(0,s._)("td",null,(0,n.zw)(e.author),1),(0,s._)("td",null,(0,n.zw)(e.header_content),1),(0,s._)("td",null,(0,n.zw)(e.page_no),1),(0,s._)("td",{innerHTML:e.content},null,8,_),(0,s._)("td",null,[(0,s._)("button",{class:"view-details btn btn-primary",onClick:a=>T.viewDetails(e,t)},"xem",8,y)])])))),128))])])):(0,s.kq)("",!0),u.totalElementsV2>0&&!u.isLoading?((0,s.wg)(),(0,s.iD)("nav",w,[(0,s.Wm)(Pe,{modelValue:u.page,"onUpdate:modelValue":t[3]||(t[3]=e=>u.page=e),"page-count":u.pageCount,"page-range":3,"margin-pages":2,"click-handler":T.clickCallback,"container-class":"pagination","page-class":"page-item","next-link-class":"page-link","prev-link-class":"page-link"},null,8,["modelValue","page-count","click-handler"])])):(0,s.kq)("",!0)]),u.modalShow?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:t[12]||(t[12]=(...e)=>T.clearPopup&&T.clearPopup(...e)),ref:"modal1",class:"custome-modal",tabindex:"-1","aria-modal":"true",role:"dialog"},[(0,s._)("div",x,[(0,s._)("div",v,[S,(0,s._)("div",P,[u.hasSelectedString?((0,s.wg)(),(0,s.iD)("div",{key:0,style:(0,n.j5)("background: rgb(253 147 0); z-index: 1111111; position: absolute; top: "+u.posY+"px; left: "+u.posX+"px;")},[(0,s._)("div",L,[(0,s._)("div",D,[(0,s._)("a",{href:"javascript:void(0);",onClick:t[4]||(t[4]=e=>T.showPopup())},z)])])],4)):(0,s.kq)("",!0),(0,s._)("div",V,[(0,s._)("div",I,[M,(0,s._)("div",H,[(0,s._)("h1",q,(0,n.zw)(u.bookCurrent.book_name),1),(0,s._)("div",B,[(0,s._)("a",E," (Tác giả: "+(0,n.zw)(u.bookCurrent.author)+" - Xuất bản "+(0,n.zw)(u.bookCurrent.published_year)+") ",1)])])]),K,(0,s._)("form",N,[(0,s._)("div",U,[(0,s._)("button",{onClick:t[5]||(t[5]=e=>T.toNextItem(u.indexItem)),type:"button",class:"btn btn-sm btn-outline-secondary ng-star-inserted"},[R,(0,s.Uk)(" Kết quả tiếp thep ")]),(0,s.Uk)("   "),(0,s._)("button",{onClick:t[6]||(t[6]=e=>T.toPrevItem(u.indexItem)),type:"button",class:"btn btn-sm btn-outline-secondary ng-star-inserted"},[Y,(0,s.Uk)(" Kết quả trước đó ")])]),(0,s._)("span",Z,[(0,s._)("i",{onClick:t[7]||(t[7]=(...e)=>T.zoomOut&&T.zoomOut(...e)),ref:"zout",class:"fa fa-search-minus",style:{"font-size":"22px",color:"rgb(108 117 125)",cursor:"pointer"}},null,512),(0,s.Uk)("   "),(0,s._)("i",{onClick:t[8]||(t[8]=(...e)=>T.zoomIn&&T.zoomIn(...e)),ref:"zin",class:"fa fa-search-plus",style:{"font-size":"22px",color:"rgb(108 117 125)",cursor:"pointer"}},null,512)])]),F,A,X,(0,s._)("div",j,[(0,s._)("div",{class:"content",ref:"pdfContent",onContextmenu:t[9]||(t[9]=(0,l.iM)((e=>T.handlerFunction(e)),["right"])),onClick:t[10]||(t[10]=(...e)=>T.clearPopup&&T.clearPopup(...e))},[(0,s.Wm)(Le,{source:u.pdfSource,page:u.bookCurrent.page_no,onRendered:T.handleDocumentRender},null,8,["source","page","onRendered"])],544),(0,s._)("div",{class:(0,n.C_)(["loader-background",{"done-loading":u.isDoneLoading}])}," Đang tải ... ",2)])])],512),(0,s._)("div",O,[(0,s.Wm)(De,{to:{name:"ViewPdf",params:{id:u.bookCurrent.id,startPage:u.bookCurrent.page_no,index:2}},target:"_blank",class:"btn btn-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Xem toàn bộ ")])),_:1},8,["to"]),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[11]||(t[11]=(...e)=>T.close&&T.close(...e))}," Đóng ")])])])],512)):(0,s.kq)("",!0),W,u.book&&u.modalShow2?((0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("div",J,[(0,s._)("div",Q,[ee,(0,s._)("div",te,[(0,s._)("span",ae,' "'+(0,n.zw)(this.selectedString)+'" ',1),se,(0,s._)("div",ne,[le,(0,s._)("div",ie,(0,n.zw)(u.book.author),1)]),(0,s._)("div",oe,[re,(0,s._)("div",de,(0,n.zw)(u.book.name),1)]),(0,s._)("div",ce,[ge,(0,s._)("div",ue,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.selectedStringMenuParents,(e=>((0,s.wg)(),(0,s.iD)(s.HY,{key:e},[(0,s._)("span",he,(0,n.zw)(e),1),(0,s.Uk)(),pe],64)))),128))])]),(0,s._)("div",be,[me,(0,s._)("div",ke,(0,n.zw)(u.book.publisher),1)]),(0,s._)("div",fe,[Ce,(0,s._)("div",_e,(0,n.zw)(u.book.publishedYear),1)]),(0,s._)("div",ye,[we,(0,s._)("div",xe,[(0,s._)("span",ve,(0,n.zw)(u.bookCurrent.page_no),1)])])]),(0,s._)("div",Se,[(0,s._)("button",{type:"button",onClick:t[13]||(t[13]=e=>T.doExtractInfo()),ref:"copyBtn",class:"btn btn-primary copy-btn"}," Sao chép ",512)])])])],512)):(0,s.kq)("",!0),u.modalShow?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"modal-cover",onClick:t[14]||(t[14]=(...e)=>T.clearPopup&&T.clearPopup(...e))})):(0,s.kq)("",!0),u.modalShow2?((0,s.wg)(),(0,s.iD)("div",{key:3,class:"modal-cover-2",onClick:t[15]||(t[15]=e=>u.modalShow2=!1)})):(0,s.kq)("",!0)],64)}a(7658);var Le=a(65),De=a(4501),Te=a(5580),ze=a(3627),Ve=a.n(ze),Ie=a(1073),Me=a(5325),He={components:{paginate:De.Z,VuePdfEmbed:Ve(),config:Ie.Z,Loader:Me.Z},data(){return{isDoneLoading:!1,zoomIndex:1,modalShow:!1,modalShow2:!1,searchText:"",category:"*",searchItemsV2:[],pageCount:0,totalElementsV2:0,page:Te.ZP.DEFAULT_PAGE,pageSize:Te.ZP.PAGE_SIZE,book:null,bookCurrent:null,page:1,pdfSource:"http://localhost:8088/books/1623/pdf",hasSelectedString:!1,selectedString:"",posX:0,posY:0,selectedStringMenuParents:[],tableContentsArr:[],isLoading:!1,indexItem:0}},computed:{...(0,Le.rn)("Category",["categories"])},created(){this.$store.dispatch("Category/get")},methods:{toNextItem(e){if(e<this.searchItemsV2.length-1){this.isDoneLoading=!1;let t=this.searchItemsV2[e+1];this.viewDetails(t,e+1)}else this.$notify({type:"warning",text:"Bạn đang ở kết quả cuối, hãy chuyển trang để tiếp tục chuyển tiếp !"})},toPrevItem(e){if(e>0){this.isDoneLoading=!1;let t=this.searchItemsV2[e-1];this.viewDetails(t,e-1)}else this.$notify({type:"warning",text:"Bạn đang ở kết quả đầu tiên, hãy chuyển trang để tiếp tục chuyển tiếp !"})},contentLoad(e,t){console.log("contentLoad: ",t,e),e.target.innerHTML=t},getChilds(e,t,a){"undefined"===typeof e.parent&&(e.parent=t),this.tableContentsArr.push({headerContent:e.headerContent,fromPage:e.fromPage,toPage:e.toPage,parent:e.parent}),e.childs.length>0&&e.childs.forEach((t=>{this.getChilds(t,e,a)}))},getParents(e){null!=e.parent&&(this.selectedStringMenuParents.push(e.parent.headerContent),console.log(e.parent),this.getParents(e.parent))},doExtractInfo(){console.log("data",this.selectedStringMenuParents);var e="";for(let s=0;s<this.selectedStringMenuParents.length;s++)e+=this.selectedStringMenuParents[s]+"/ ";const t='"'+this.selectedString+'"\nTrang '+this.bookCurrent.page_no+" - Mục: "+e.substring(0,e.length-2)+" - Sách: "+this.book.name+" - Tác giả: "+this.book.author+" - Xuất bản: "+this.book.publisher+" ("+this.book.publishedYear+")",a=document.createElement("textarea");a.value=t,this.$refs.reference.appendChild(a),a.select(),a.setSelectionRange(0,99999),document.execCommand("copy"),this.$refs.reference.removeChild(a),this.$refs.copyBtn.innerHTML="Đã sao chép",this.$refs.copyBtn.style.backgroundColor="green"},clearPopup(){this.hasSelectedString=!1},showPopup(){this.tableContentsArr.forEach((e=>{console.log("trich dan: ",e),e.fromPage<=this.bookCurrent.page_no&&e.toPage>=this.bookCurrent.page_no&&(this.selectedStringMenuParents=[e.headerContent],this.getParents(e),console.log("set content table at ",e))})),$("#fire-modal").click(),this.modalShow2=!0},close(){this.modalShow=!1,this.isDoneLoading=!1,this.hasSelectedString=!1},zoomOut(){let e=this.$refs.pdfContent;if(this.zoomIndex>=.5){this.zoomIndex=this.zoomIndex-.1,console.log("zoomOut ",this.zoomIndex),e.style.zoom=this.zoomIndex;let t=this.$refs.zin;t.style.color="rgb(108 117 125)"}else{let e=this.$refs.zout;e.style.color="rgb(218 226 232)"}},zoomIn(){let e=this.$refs.pdfContent;if(this.zoomIndex<=1.5){this.zoomIndex=this.zoomIndex+.1,console.log("zoomIn ",this.zoomIndex),e.style.zoom=this.zoomIndex;let t=this.$refs.zout;t.style.color="rgb(108 117 125)"}else{let e=this.$refs.zin;e.style.color="rgb(218 226 232)"}},viewDetails(e,t){console.log("sss: ",t,this.searchItemsV2.length),this.indexItem=t,this.modalShow=!0,this.bookCurrent=e,this.pdfSource=Ie.Z.VUE_APP_BASE_URL+`/books/${e.id}/pdf`,console.log("base url: ",this.pdfSource),this.$store.dispatch("Book/findById",e.id).then((e=>{let t=e.data.content.book;this.book=t,this.book.tableContents=t.tableContent;let a=this.book.tableContents;a.forEach((e=>{this.getChilds(e,null,[])}))}))},clickCallback(){this.reloadSearchResult(this.category,this.page),window.scrollTo(0,0)},async reloadSearchResult(e,t){console.log("searchText: ",this.searchText),(null==!this.searchText&&void 0==!this.searchText||""==!this.searchText.trim())&&(this.page=t,this.isLoading=!0,await this.$store.dispatch("Search/get",{page:t,searchText:this.searchText,category:e}).then((e=>{this.searchItemsV2=e.data.content,this.totalElementsV2=e.data.totalElements,this.pageCount=e.data.totalPages})),this.isLoading=!1)},handleDocumentRender(){this.isDoneLoading=!0},handlerFunction(e){if(e.preventDefault(),console.log("length: ",window.getSelection().toString(),window.getSelection().toString().length,this.hasSelectedString),window.getSelection().toString()!=this.selectedString&&(this.hasSelectedString=!1),window.getSelection().toString().length>0&&1==this.hasSelectedString)return;let t=/^[a-z0-9]$/i;if((1!=window.getSelection().toString().length||t.test(window.getSelection().toString()))&&(this.hasSelectedString=!1,window.getSelection().toString().length>0)){this.hasSelectedString=!0;encodeURIComponent(window.getSelection().toString()).replace(/[!'()*]/g,escape);this.selectedString=window.getSelection().toString();const t=e.clientX-100,a=e.clientY+this.$refs.searchContent.scrollTop-70;this.posX=t,this.posY=a}}}},qe=a(89);const Be=(0,qe.Z)(He,[["render",Pe],["__scopeId","data-v-baabd6c0"]]);var $e=Be}}]);
//# sourceMappingURL=224.adffb772.js.map